# Todo List 功能使用指南

## 概述

Todo List 功能允许 Agent **自动创建和管理任务列表**，并通过**自动逐个执行任务**来有序完成复杂的工作。你只需要提出任务需求，Agent会自动：
1. 将复杂任务分解为多个子任务
2. 创建任务列表
3. 按顺序自动执行所有任务
4. 跟踪任务状态
5. 返回最终结果

**无需手动干预，完全自动化！**

## 主要功能

### 1. 添加任务 (add)
创建新的任务项到任务列表中。

**示例：**
- "添加任务：数据清洗"
- "创建一个新任务：读取CSV文件"
- "将'统计分析'加入待办列表"

### 2. 列出任务 (list)
查看所有任务及其状态。

**示例：**
- "显示任务列表"
- "查看所有待办任务"
- "当前有哪些任务？"

### 3. 开始任务 (start)
标记任务为"进行中"状态。

**示例：**
- "开始执行任务1"
- "现在处理任务2"

### 4. 完成任务 (complete)
标记任务为"已完成"状态。

**示例：**
- "完成任务1"
- "标记任务2为完成"

### 5. 更新任务状态 (update)
手动更新任务状态。

**支持的状态：**
- `pending`: 待完成
- `in_progress`: 进行中
- `completed`: 已完成
- `cancelled`: 已取消

**示例：**
- "更新任务3的状态为进行中"

### 6. 删除任务 (remove)
从列表中删除任务。

**示例：**
- "删除任务5"
- "移除任务2"

### 7. 清空任务列表 (clear)
清除所有任务。

**示例：**
- "清空所有任务"
- "删除整个任务列表"

## 任务状态流转

```
pending (待完成)
    ↓
in_progress (进行中)
    ↓
completed (已完成)
```

或者，也可以取消任务：
```
pending → cancelled
in_progress → cancelled
```

## 使用场景

### 场景1：数据分析项目（自动执行）

**用户只需提出需求：**
```
用户：帮我分析销售数据，包括读取、清洗、统计和可视化
```

**Agent自动完成所有步骤：**
1. 自动创建任务列表：
   - 任务1：读取CSV文件
   - 任务2：数据清洗
   - 任务3：统计分析
   - 任务4：生成可视化图表

2. 自动逐个执行任务：
   - 更新任务1为"进行中" → 读取文件 → 更新任务1为"已完成"
   - 更新任务2为"进行中" → 清洗数据 → 更新任务2为"已完成"
   - 更新任务3为"进行中" → 统计分析 → 更新任务3为"已完成"
   - 更新任务4为"进行中" → 生成图表 → 更新任务4为"已完成"

3. 返回最终结果和所有完成的任务列表

**整个过程完全自动，无需用户干预！**

### 场景2：复杂的数据处理流程

**用户只需：**
```
"我要处理多个数据文件，每个文件需要清洗、分析和导出"
```

**Agent自动完成：**
1. 自动识别所有需要处理的文件
2. 为每个文件创建处理任务
3. 逐个执行所有任务
4. 提供最终综合报告

## 任务存储

任务列表会自动保存到 `todo_list.json` 文件中，因此可以在不同的会话之间保持任务状态。

## 最佳实践

### 推荐方式（自动模式）
1. **直接提出复杂任务**：让Agent自动分解和执行
2. **使用清晰的描述**：描述完整的任务需求
3. **信任自动执行**：不需要手动干预每个步骤

### 高级方式（手动模式）
1. **分解复杂任务**：将一个大的任务分解为多个小任务
2. **按顺序执行**：按照任务的逻辑顺序逐个执行
3. **及时更新状态**：每完成一个步骤就更新任务状态
4. **查看进度**：定期查看任务列表了解当前进度
5. **使用有意义的描述**：任务描述要清晰明确

## 示例代码

### 自动执行模式（推荐）

```python
from agent import DataAnalyserAgent

# 创建agent
agent = DataAnalyserAgent()

# 直接提出复杂任务，Agent自动分解并执行
response = agent.run("帮我分析销售数据，包括读取、清洗、统计和可视化")
print(response)

# Agent会自动：
# 1. 创建任务列表
# 2. 逐个执行所有任务
# 3. 返回最终结果
```

### 手动管理模式（高级）

```python
# 手动添加任务
agent.run("添加任务：读取数据")
agent.run("添加任务：数据清洗")
agent.run("添加任务：统计分析")

# 查看任务
agent.run("显示任务列表")

# 手动执行任务
agent.run("更新任务1为进行中")
# ... 执行具体工作 ...
agent.run("更新任务1为已完成")
```

## 技术细节

- **存储格式**：JSON格式，包含任务ID、描述和状态
- **任务ID**：自动递增的唯一标识符
- **状态管理**：支持pending、in_progress、completed、cancelled四种状态
- **持久化**：任务列表保存在本地文件中

## 注意事项

1. 确保有写入权限以保存任务列表
2. 任务描述应该清晰明确
3. 定期查看任务列表避免遗漏任务
4. 使用"complete"而非"remove"来标记已完成的任务

